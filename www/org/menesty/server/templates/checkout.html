<? $contextUrl = $this->params["contextUrl"]; ?>
<div class="col-lg-3 col-md-3 col-sm-12">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <?=$this->getParam("recent_product_content");?>
    </div>
</div>

<div class="clearfix visible-sm"></div>
<? $clientOrderInfo = $this->getParam('clientInfo');?>
<!-- Cart -->
<div class="col-lg-9 col-md-9 col-sm-12">
    <div class="col-lg-12 col-sm-12">
        <span class="title uppercase"><?=Language::getMenuLabel('checkout');?></span>
    </div>
    <div class="col-lg-12 col-sm-12 hero-feature">


        <form class="form-horizontal" method="post" action="<?=$contextUrl;?>checkout/next" id="checkout-form">
            <div class="widget-box">
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('first_name');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="firstName" class="form-control input-sm" required="true" minlength="3"
                               maxlength="20"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','first_name');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(3));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(20));?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getFirstName());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('last_name');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="lastName" class="form-control" required="true" minlength="1"
                               maxlength="100"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','last_name');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(3));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(20));?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getLastName());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label">Email *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="email" class="form-control"
                               required ="true"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','',array('Email'));?>"
                               data-msg-email="<?=Language::getCheckoutErrorLabel('email');?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getEmail());?>"/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('telephone');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="telephone" class="form-control" required="true" minlength="4"
                               maxlength="20"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','telephone');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(4));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(20));?>"
                               data-msg-digits="<?=Language::getCheckoutErrorLabel('digits');?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getTelephone());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('address');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <textarea name="address" class="form-control" required="true" minlength="4" rows="3"
                                  maxlength="100"
                                  data-msg-required="<?=Language::getCheckoutErrorLabel('required','address');?>"
                                  data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(4));?>"
                                  data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(100));?>"
                                ><?=htmlspecialchars($clientOrderInfo->getAddress());?></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('city');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="city" class="form-control" required="true" minlength="4"
                               maxlength="30"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','city');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(4));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(30));?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getCity());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('post_code');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="post_code" class="form-control" required="true" minlength="2"
                               maxlength="8"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','post_code');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(2));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(8));?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getPostCode());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('country');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <select class="form-control" name="country" required="true"
                                data-msg-required="<?=Language::getCheckoutErrorLabel('required','country');?>">
                            <option value=""><?=Language::getMainLabel('please_select_label');?></option>
                            <? foreach(Language::getCheckoutLabel('countries') as $country) { ?>
                            <option value="<?=$country;?>" <?=$clientOrderInfo->getCountry()==$country?'selected':''?>><?=$country;?></option>
                            <?};?>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('region_state');?>
                        *</label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <input type="text" name="region_state" class="form-control" required="true" minlength="3"
                               maxlength="30"
                               data-msg-required="<?=Language::getCheckoutErrorLabel('required','region_state');?>"
                               data-msg-minlength="<?=Language::getCheckoutErrorLabel('minLength',null, array(3));?>"
                               data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(30));?>"
                               value="<?=htmlspecialchars($clientOrderInfo->getRegionState());?>" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 col-md-3 col-lg-2 control-label"><?=Language::getCheckoutLabel('comment');?></label>

                    <div class="col-sm-9 col-md-9 col-lg-10 control-group">
                        <textarea name="comment" class="form-control" rows="6"
                                  data-msg-maxlength="<?=Language::getCheckoutErrorLabel('maxLength',null, array(200));?>"><?=htmlspecialchars($clientOrderInfo->getComment());?></textarea>
                    </div>
                </div>
            </div>
            <table class="table table-bordered tbl-cart">
                <thead>
                <tr>
                    <td><?=Language::getCartLabel("product_name");?></td>
                    <td><?=Language::getCartLabel("quantity");?></td>
                    <td><?=Language::getCartLabel("unit_price");?></td>
                    <td><?=Language::getCartLabel("sub_total");?></td>
                </tr>
                </thead>
                <tbody>
                <? foreach(ShoppingCart::get()->getItems() as $cartItem) { ?>
                <tr>
                    <td><?=$cartItem->getProduct()->getTitle();?></td>
                    <td class="text-center"><?=$cartItem->getCount();?></td>
                    <td class="price"><?=ShoppingCart::get()->getCurrency()->getName();?> <?=$cartItem->getProduct()->getPrice();?></td>
                    <td>$ <?=$cartItem->getTotalPrice();?></td>
                </tr>
                <?};?>
                <tr>
                    <td colspan="3" align="right"><?=Language::getCartLabel("total");?></td>
                    <td class="total" colspan="2"><b><?=ShoppingCart::get()->getCurrency()->getName();?> <?=ShoppingCart::get()->getTotalPrice();?></b></td>
                </tr>
                </tbody>
            </table>
            <div class="btn-group btns-cart">
                <input type="submit" class="btn btn-primary" value="<?=Language::getCheckoutLabel('next');?>"/>
            </div>
        </form>
    </div>
</div>